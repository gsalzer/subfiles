\documentclass[main]{subfiles}
\begin{document}

This was a tricky problem.
\begin{enumerate}
\item The \verb|memoir| class contains some old version of the
  \verb|verbatim| package and marks it as loaded.
\item The user loads the \verb|comment| package that defines a
  \verb|comment| environment similar to the \verb|verbatim| package.
\item Even if the \verb|subfiles| package contains
  \verb|\RequirePackage{verbatim}|, it will not be loaded a second
  time and the definition of the \verb|comment| environment
  stays the one from the \verb|comment| package, which does not work
  when the main file is loaded from a subfile and the \verb|document|
  environment should be skipped.
\end{enumerate}
Interestingly, this combination worked in version 1.1 of the
\verb|subfiles| package, since there the \verb|document| environment
was set to the \verb|comment| environment already before loading the
preamble of the main file. Subsequent versions postponed this step to
the end of the preamble to make the \verb|subfiles| package work with
classes like \verb|revtex|, and thus ran into this problem.

If the subfile can be typeset without errors, then this particular
issue is not present in the current version of the \verb|subfiles|
package.

\end{document}
